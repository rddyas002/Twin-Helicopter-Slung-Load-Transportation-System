<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,225" id="srcline225">225</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,226" id="srcline226">226</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S56T17U2490">x</span>] = project2_2D(<span class="var type1" id="S57T5U2493">A</span>,<span class="var type1" id="S58T5U2494">Rcw</span>,<span class="var type1" id="S59T6U2495">Tcw</span>,<span class="var type1" id="S60T6U2496">Twp</span>,<span class="var type1" id="S61T8U2497">qwp</span>,<span class="var type1" id="S62T6U2498">Po</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,227" id="srcline227">227</a></span><span class="line">    <span class="mxinfo" id="T17:U8"><span class="var type1" id="S56T17U2501">x</span> = <span class="mxinfo" id="T17:U10">zeros(<span class="mxinfo" id="T1:U11">2</span>,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,228" id="srcline228">228</a></span><span class="line">    <span class="mxinfo" id="T1:U12"><span class="var type1" id="S64T1U2508">q1</span> = <span class="mxinfo" id="T1:U14"><span class="var type1" id="S61T8U2510">qwp</span>(<span class="mxinfo" id="T1:U16">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,229" id="srcline229">229</a></span><span class="line">    <span class="mxinfo" id="T1:U17"><span class="var type1" id="S65T1U2514">q2</span> = <span class="mxinfo" id="T1:U19"><span class="var type1" id="S61T8U2516">qwp</span>(<span class="mxinfo" id="T1:U21">2</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,230" id="srcline230">230</a></span><span class="line">    <span class="mxinfo" id="T1:U22"><span class="var type1" id="S66T1U2520">q3</span> = <span class="mxinfo" id="T1:U24"><span class="var type1" id="S61T8U2522">qwp</span>(<span class="mxinfo" id="T1:U26">3</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,231" id="srcline231">231</a></span><span class="line">    <span class="mxinfo" id="T1:U27"><span class="var type1" id="S67T1U2526">q4</span> = <span class="mxinfo" id="T1:U29"><span class="var type1" id="S61T8U2528">qwp</span>(<span class="mxinfo" id="T1:U31">4</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,232" id="srcline232">232</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,233" id="srcline233">233</a></span><span class="line">    <span class="mxinfo" id="T1:U32"><span class="var type1" id="S68T1U2532">rq11</span> = <span class="mxinfo" id="T1:U34"><span class="mxinfo" id="T1:U35"><span class="mxinfo" id="T1:U36"><span class="mxinfo" id="T1:U37"><span class="var type1" id="S64T1U2537">q1</span>^2</span> + <span class="mxinfo" id="T1:U39"><span class="var type1" id="S65T1U2540">q2</span>^2</span></span> - <span class="mxinfo" id="T1:U41"><span class="var type1" id="S66T1U2543">q3</span>^2</span></span> - <span class="mxinfo" id="T1:U43"><span class="var type1" id="S67T1U2546">q4</span>^2</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,234" id="srcline234">234</a></span><span class="line">    <span class="mxinfo" id="T1:U45"><span class="var type1" id="S69T1U2550">rq12</span> = <span class="mxinfo" id="T1:U47"><span class="mxinfo" id="T1:U48">2</span>*(<span class="mxinfo" id="T1:U49"><span class="mxinfo" id="T1:U50"><span class="var type1" id="S65T1U2556">q2</span>*<span class="var type1" id="S66T1U2557">q3</span></span> - <span class="mxinfo" id="T1:U53"><span class="var type1" id="S64T1U2559">q1</span>*<span class="var type1" id="S67T1U2560">q4</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,235" id="srcline235">235</a></span><span class="line">    <span class="mxinfo" id="T1:U56"><span class="var type1" id="S70T1U2563">rq13</span> = <span class="mxinfo" id="T1:U58"><span class="mxinfo" id="T1:U59">2</span>*(<span class="mxinfo" id="T1:U60"><span class="mxinfo" id="T1:U61"><span class="var type1" id="S65T1U2569">q2</span>*<span class="var type1" id="S67T1U2570">q4</span></span> + <span class="mxinfo" id="T1:U64"><span class="var type1" id="S64T1U2572">q1</span>*<span class="var type1" id="S66T1U2573">q3</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,236" id="srcline236">236</a></span><span class="line">    <span class="mxinfo" id="T1:U67"><span class="var type1" id="S71T1U2576">rq21</span> = <span class="mxinfo" id="T1:U69"><span class="mxinfo" id="T1:U70">2</span>*(<span class="mxinfo" id="T1:U71"><span class="mxinfo" id="T1:U72"><span class="var type1" id="S65T1U2582">q2</span>*<span class="var type1" id="S66T1U2583">q3</span></span> + <span class="mxinfo" id="T1:U75"><span class="var type1" id="S64T1U2585">q1</span>*<span class="var type1" id="S67T1U2586">q4</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,237" id="srcline237">237</a></span><span class="line">    <span class="mxinfo" id="T1:U78"><span class="var type1" id="S72T1U2589">rq22</span> = <span class="mxinfo" id="T1:U80"><span class="mxinfo" id="T1:U81"><span class="mxinfo" id="T1:U82"><span class="mxinfo" id="T1:U83"><span class="var type1" id="S64T1U2594">q1</span>^2</span> - <span class="mxinfo" id="T1:U85"><span class="var type1" id="S65T1U2597">q2</span>^2</span></span> + <span class="mxinfo" id="T1:U87"><span class="var type1" id="S66T1U2600">q3</span>^2</span></span> - <span class="mxinfo" id="T1:U89"><span class="var type1" id="S67T1U2603">q4</span>^2</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,238" id="srcline238">238</a></span><span class="line">    <span class="mxinfo" id="T1:U91"><span class="var type1" id="S73T1U2607">rq23</span> = <span class="mxinfo" id="T1:U93"><span class="mxinfo" id="T1:U94">2</span>*(<span class="mxinfo" id="T1:U95"><span class="mxinfo" id="T1:U96"><span class="var type1" id="S66T1U2613">q3</span>*<span class="var type1" id="S67T1U2614">q4</span></span> - <span class="mxinfo" id="T1:U99"><span class="var type1" id="S64T1U2616">q1</span>*<span class="var type1" id="S65T1U2617">q2</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,239" id="srcline239">239</a></span><span class="line">    <span class="mxinfo" id="T1:U102"><span class="var type1" id="S74T1U2620">rq31</span> = <span class="mxinfo" id="T1:U104"><span class="mxinfo" id="T1:U105">2</span>*(<span class="mxinfo" id="T1:U106"><span class="mxinfo" id="T1:U107"><span class="var type1" id="S65T1U2626">q2</span>*<span class="var type1" id="S67T1U2627">q4</span></span> - <span class="mxinfo" id="T1:U110"><span class="var type1" id="S64T1U2629">q1</span>*<span class="var type1" id="S66T1U2630">q3</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,240" id="srcline240">240</a></span><span class="line">    <span class="mxinfo" id="T1:U113"><span class="var type1" id="S75T1U2633">rq32</span> = <span class="mxinfo" id="T1:U115"><span class="mxinfo" id="T1:U116">2</span>*(<span class="mxinfo" id="T1:U117"><span class="mxinfo" id="T1:U118"><span class="var type1" id="S66T1U2639">q3</span>*<span class="var type1" id="S67T1U2640">q4</span></span> + <span class="mxinfo" id="T1:U121"><span class="var type1" id="S64T1U2642">q1</span>*<span class="var type1" id="S65T1U2643">q2</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,241" id="srcline241">241</a></span><span class="line">    <span class="mxinfo" id="T1:U124"><span class="var type1" id="S76T1U2646">rq33</span> = <span class="mxinfo" id="T1:U126"><span class="mxinfo" id="T1:U127"><span class="mxinfo" id="T1:U128"><span class="mxinfo" id="T1:U129"><span class="var type1" id="S64T1U2651">q1</span>^2</span> - <span class="mxinfo" id="T1:U131"><span class="var type1" id="S65T1U2654">q2</span>^2</span></span> - <span class="mxinfo" id="T1:U133"><span class="var type1" id="S66T1U2657">q3</span>^2</span></span> + <span class="mxinfo" id="T1:U135"><span class="var type1" id="S67T1U2660">q4</span>^2</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,242" id="srcline242">242</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,243" id="srcline243">243</a></span><span class="line">    <span class="mxinfo" id="T5:U137"><span class="var type1" id="S77T5U2664">Rwp</span> = <span class="mxinfo" id="T5:U139">[<span class="mxinfo" id="T18:U140"><span class="var type1" id="S68T1U2667">rq11</span> <span class="var type1" id="S69T1U2668">rq12</span> <span class="var type1" id="S70T1U2669">rq13</span></span>; <span class="mxinfo" id="T18:U144"><span class="var type1" id="S71T1U2671">rq21</span> <span class="var type1" id="S72T1U2672">rq22</span> <span class="var type1" id="S73T1U2673">rq23</span></span>; <span class="mxinfo" id="T18:U148"><span class="var type1" id="S74T1U2675">rq31</span> <span class="var type1" id="S75T1U2676">rq32</span> <span class="var type1" id="S76T1U2677">rq33</span></span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,244" id="srcline244">244</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,245" id="srcline245">245</a></span><span class="line">    <span class="mxinfo" id="T6:U152"><span class="var type1" id="S78T6U2680">image_homog</span> = <span class="mxinfo" id="T6:U154"><span class="mxinfo" id="T5:U155"><span class="var type1" id="S57T5U2683">A</span>*<span class="var type1" id="S58T5U2684">Rcw</span></span>*(<span class="mxinfo" id="T6:U158"><span class="mxinfo" id="T6:U159"><span class="mxinfo" id="T6:U160"><span class="var type1" id="S77T5U2689">Rwp</span>*<span class="var type1" id="S62T6U2690">Po</span></span> + <span class="var type1" id="S60T6U2691">Twp</span></span> - <span class="var type1" id="S59T6U2692">Tcw</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,246" id="srcline246">246</a></span><span class="line">    <span class="mxinfo" id="T1:U165"><span class="mxinfo" id="T1:U166"><span class="var type1" id="S56T17U2696">x</span>(<span class="mxinfo" id="T1:U168">1</span>,<span class="mxinfo" id="T1:U169">1</span>)</span> = <span class="mxinfo" id="T1:U170"><span class="mxinfo" id="T1:U171"><span class="var type1" id="S78T6U2701">image_homog</span>(<span class="mxinfo" id="T1:U173">1</span>)</span>/<span class="mxinfo" id="T1:U174"><span class="var type1" id="S78T6U2704">image_homog</span>(<span class="mxinfo" id="T1:U176">3</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,247" id="srcline247">247</a></span><span class="line">    <span class="mxinfo" id="T1:U177"><span class="mxinfo" id="T1:U178"><span class="var type1" id="S56T17U2709">x</span>(<span class="mxinfo" id="T1:U180">2</span>,<span class="mxinfo" id="T1:U181">1</span>)</span> = <span class="mxinfo" id="T1:U182"><span class="mxinfo" id="T1:U183"><span class="var type1" id="S78T6U2714">image_homog</span>(<span class="mxinfo" id="T1:U185">2</span>)</span>/<span class="mxinfo" id="T1:U186"><span class="var type1" id="S78T6U2717">image_homog</span>(<span class="mxinfo" id="T1:U188">3</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,248" id="srcline248">248</a></span><span class="line"><span class="keyword">end</span></span></span>
</pre>
