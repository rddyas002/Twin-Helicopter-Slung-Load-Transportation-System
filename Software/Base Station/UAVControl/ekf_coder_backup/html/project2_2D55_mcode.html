<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,233" id="srcline233">233</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,234" id="srcline234">234</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S57T16U2949">x</span>] = project2_2D(<span class="var type1" id="S58T5U2952">A</span>,<span class="var type1" id="S59T5U2953">Rcw</span>,<span class="var type1" id="S60T6U2954">Tcw</span>,<span class="var type1" id="S61T6U2955">Twp</span>,<span class="var type1" id="S62T9U2956">qwp</span>,<span class="var type1" id="S63T6U2957">Po</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,235" id="srcline235">235</a></span><span class="line">    <span class="mxinfo" id="T16:U8"><span class="var type1" id="S57T16U2960">x</span> = <span class="mxinfo" id="T16:U10">zeros(<span class="mxinfo" id="T1:U11">2</span>,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,236" id="srcline236">236</a></span><span class="line">    <span class="mxinfo" id="T1:U12"><span class="var type1" id="S65T1U2967">q1</span> = <span class="mxinfo" id="T1:U14"><span class="var type1" id="S62T9U2969">qwp</span>(<span class="mxinfo" id="T1:U16">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,237" id="srcline237">237</a></span><span class="line">    <span class="mxinfo" id="T1:U17"><span class="var type1" id="S66T1U2973">q2</span> = <span class="mxinfo" id="T1:U19"><span class="var type1" id="S62T9U2975">qwp</span>(<span class="mxinfo" id="T1:U21">2</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,238" id="srcline238">238</a></span><span class="line">    <span class="mxinfo" id="T1:U22"><span class="var type1" id="S67T1U2979">q3</span> = <span class="mxinfo" id="T1:U24"><span class="var type1" id="S62T9U2981">qwp</span>(<span class="mxinfo" id="T1:U26">3</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,239" id="srcline239">239</a></span><span class="line">    <span class="mxinfo" id="T1:U27"><span class="var type1" id="S68T1U2985">q4</span> = <span class="mxinfo" id="T1:U29"><span class="var type1" id="S62T9U2987">qwp</span>(<span class="mxinfo" id="T1:U31">4</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,240" id="srcline240">240</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,241" id="srcline241">241</a></span><span class="line">    <span class="mxinfo" id="T1:U32"><span class="var type1" id="S69T1U2991">rq11</span> = <span class="mxinfo" id="T1:U34"><span class="mxinfo" id="T1:U35"><span class="mxinfo" id="T1:U36"><span class="mxinfo" id="T1:U37"><span class="var type1" id="S65T1U2996">q1</span>^2</span> + <span class="mxinfo" id="T1:U39"><span class="var type1" id="S66T1U2999">q2</span>^2</span></span> - <span class="mxinfo" id="T1:U41"><span class="var type1" id="S67T1U3002">q3</span>^2</span></span> - <span class="mxinfo" id="T1:U43"><span class="var type1" id="S68T1U3005">q4</span>^2</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,242" id="srcline242">242</a></span><span class="line">    <span class="mxinfo" id="T1:U45"><span class="var type1" id="S70T1U3009">rq12</span> = <span class="mxinfo" id="T1:U47"><span class="mxinfo" id="T1:U48">2</span>*(<span class="mxinfo" id="T1:U49"><span class="mxinfo" id="T1:U50"><span class="var type1" id="S66T1U3015">q2</span>*<span class="var type1" id="S67T1U3016">q3</span></span> - <span class="mxinfo" id="T1:U53"><span class="var type1" id="S65T1U3018">q1</span>*<span class="var type1" id="S68T1U3019">q4</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,243" id="srcline243">243</a></span><span class="line">    <span class="mxinfo" id="T1:U56"><span class="var type1" id="S71T1U3022">rq13</span> = <span class="mxinfo" id="T1:U58"><span class="mxinfo" id="T1:U59">2</span>*(<span class="mxinfo" id="T1:U60"><span class="mxinfo" id="T1:U61"><span class="var type1" id="S66T1U3028">q2</span>*<span class="var type1" id="S68T1U3029">q4</span></span> + <span class="mxinfo" id="T1:U64"><span class="var type1" id="S65T1U3031">q1</span>*<span class="var type1" id="S67T1U3032">q3</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,244" id="srcline244">244</a></span><span class="line">    <span class="mxinfo" id="T1:U67"><span class="var type1" id="S72T1U3035">rq21</span> = <span class="mxinfo" id="T1:U69"><span class="mxinfo" id="T1:U70">2</span>*(<span class="mxinfo" id="T1:U71"><span class="mxinfo" id="T1:U72"><span class="var type1" id="S66T1U3041">q2</span>*<span class="var type1" id="S67T1U3042">q3</span></span> + <span class="mxinfo" id="T1:U75"><span class="var type1" id="S65T1U3044">q1</span>*<span class="var type1" id="S68T1U3045">q4</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,245" id="srcline245">245</a></span><span class="line">    <span class="mxinfo" id="T1:U78"><span class="var type1" id="S73T1U3048">rq22</span> = <span class="mxinfo" id="T1:U80"><span class="mxinfo" id="T1:U81"><span class="mxinfo" id="T1:U82"><span class="mxinfo" id="T1:U83"><span class="var type1" id="S65T1U3053">q1</span>^2</span> - <span class="mxinfo" id="T1:U85"><span class="var type1" id="S66T1U3056">q2</span>^2</span></span> + <span class="mxinfo" id="T1:U87"><span class="var type1" id="S67T1U3059">q3</span>^2</span></span> - <span class="mxinfo" id="T1:U89"><span class="var type1" id="S68T1U3062">q4</span>^2</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,246" id="srcline246">246</a></span><span class="line">    <span class="mxinfo" id="T1:U91"><span class="var type1" id="S74T1U3066">rq23</span> = <span class="mxinfo" id="T1:U93"><span class="mxinfo" id="T1:U94">2</span>*(<span class="mxinfo" id="T1:U95"><span class="mxinfo" id="T1:U96"><span class="var type1" id="S67T1U3072">q3</span>*<span class="var type1" id="S68T1U3073">q4</span></span> - <span class="mxinfo" id="T1:U99"><span class="var type1" id="S65T1U3075">q1</span>*<span class="var type1" id="S66T1U3076">q2</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,247" id="srcline247">247</a></span><span class="line">    <span class="mxinfo" id="T1:U102"><span class="var type1" id="S75T1U3079">rq31</span> = <span class="mxinfo" id="T1:U104"><span class="mxinfo" id="T1:U105">2</span>*(<span class="mxinfo" id="T1:U106"><span class="mxinfo" id="T1:U107"><span class="var type1" id="S66T1U3085">q2</span>*<span class="var type1" id="S68T1U3086">q4</span></span> - <span class="mxinfo" id="T1:U110"><span class="var type1" id="S65T1U3088">q1</span>*<span class="var type1" id="S67T1U3089">q3</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,248" id="srcline248">248</a></span><span class="line">    <span class="mxinfo" id="T1:U113"><span class="var type1" id="S76T1U3092">rq32</span> = <span class="mxinfo" id="T1:U115"><span class="mxinfo" id="T1:U116">2</span>*(<span class="mxinfo" id="T1:U117"><span class="mxinfo" id="T1:U118"><span class="var type1" id="S67T1U3098">q3</span>*<span class="var type1" id="S68T1U3099">q4</span></span> + <span class="mxinfo" id="T1:U121"><span class="var type1" id="S65T1U3101">q1</span>*<span class="var type1" id="S66T1U3102">q2</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,249" id="srcline249">249</a></span><span class="line">    <span class="mxinfo" id="T1:U124"><span class="var type1" id="S77T1U3105">rq33</span> = <span class="mxinfo" id="T1:U126"><span class="mxinfo" id="T1:U127"><span class="mxinfo" id="T1:U128"><span class="mxinfo" id="T1:U129"><span class="var type1" id="S65T1U3110">q1</span>^2</span> - <span class="mxinfo" id="T1:U131"><span class="var type1" id="S66T1U3113">q2</span>^2</span></span> - <span class="mxinfo" id="T1:U133"><span class="var type1" id="S67T1U3116">q3</span>^2</span></span> + <span class="mxinfo" id="T1:U135"><span class="var type1" id="S68T1U3119">q4</span>^2</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,250" id="srcline250">250</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,251" id="srcline251">251</a></span><span class="line">    <span class="mxinfo" id="T5:U137"><span class="var type1" id="S78T5U3123">Rwp</span> = <span class="mxinfo" id="T5:U139">[<span class="mxinfo" id="T17:U140"><span class="var type1" id="S69T1U3126">rq11</span> <span class="var type1" id="S70T1U3127">rq12</span> <span class="var type1" id="S71T1U3128">rq13</span></span>; <span class="mxinfo" id="T17:U144"><span class="var type1" id="S72T1U3130">rq21</span> <span class="var type1" id="S73T1U3131">rq22</span> <span class="var type1" id="S74T1U3132">rq23</span></span>; <span class="mxinfo" id="T17:U148"><span class="var type1" id="S75T1U3134">rq31</span> <span class="var type1" id="S76T1U3135">rq32</span> <span class="var type1" id="S77T1U3136">rq33</span></span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,252" id="srcline252">252</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,253" id="srcline253">253</a></span><span class="line">    <span class="mxinfo" id="T6:U152"><span class="var type1" id="S79T6U3139">image_homog</span> = <span class="mxinfo" id="T6:U154"><span class="mxinfo" id="T5:U155"><span class="var type1" id="S58T5U3142">A</span>*<span class="var type1" id="S59T5U3143">Rcw</span></span>*(<span class="mxinfo" id="T6:U158"><span class="mxinfo" id="T6:U159"><span class="mxinfo" id="T6:U160"><span class="var type1" id="S78T5U3148">Rwp</span>*<span class="var type1" id="S63T6U3149">Po</span></span> + <span class="var type1" id="S61T6U3150">Twp</span></span> - <span class="var type1" id="S60T6U3151">Tcw</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,254" id="srcline254">254</a></span><span class="line">    <span class="mxinfo" id="T1:U165"><span class="mxinfo" id="T1:U166"><span class="var type1" id="S57T16U3155">x</span>(<span class="mxinfo" id="T1:U168">1</span>,<span class="mxinfo" id="T1:U169">1</span>)</span> = <span class="mxinfo" id="T1:U170"><span class="mxinfo" id="T1:U171"><span class="var type1" id="S79T6U3160">image_homog</span>(<span class="mxinfo" id="T1:U173">1</span>)</span>/<span class="mxinfo" id="T1:U174"><span class="var type1" id="S79T6U3163">image_homog</span>(<span class="mxinfo" id="T1:U176">3</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,255" id="srcline255">255</a></span><span class="line">    <span class="mxinfo" id="T1:U177"><span class="mxinfo" id="T1:U178"><span class="var type1" id="S57T16U3168">x</span>(<span class="mxinfo" id="T1:U180">2</span>,<span class="mxinfo" id="T1:U181">1</span>)</span> = <span class="mxinfo" id="T1:U182"><span class="mxinfo" id="T1:U183"><span class="var type1" id="S79T6U3173">image_homog</span>(<span class="mxinfo" id="T1:U185">2</span>)</span>/<span class="mxinfo" id="T1:U186"><span class="var type1" id="S79T6U3176">image_homog</span>(<span class="mxinfo" id="T1:U188">3</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,256" id="srcline256">256</a></span><span class="line"><span class="keyword">end</span></span></span>
</pre>
