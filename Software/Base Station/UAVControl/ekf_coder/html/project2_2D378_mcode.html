<pre class="code">
<span class="srcline"><span class="lineno"><a href="77,221" id="srcline221">221</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="77,222" id="srcline222">222</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S61T16U2833">x</span>] = project2_2D(<span class="var type1" id="S62T5U2836">A</span>,<span class="var type1" id="S63T5U2837">Rcw</span>,<span class="var type1" id="S64T6U2838">Tcw</span>,<span class="var type1" id="S65T6U2839">Twp</span>,<span class="var type1" id="S66T9U2840">qwp</span>,<span class="var type1" id="S67T6U2841">Po</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="77,223" id="srcline223">223</a></span><span class="line">    <span class="mxinfo" id="T16:U8"><span class="var type1" id="S61T16U2844">x</span> = <span class="mxinfo" id="T16:U10">zeros(<span class="mxinfo" id="T1:U11">2</span>,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="77,224" id="srcline224">224</a></span><span class="line">    <span class="mxinfo" id="T1:U12"><span class="var type1" id="S69T1U2851">q1</span> = <span class="mxinfo" id="T1:U14"><span class="var type1" id="S66T9U2853">qwp</span>(<span class="mxinfo" id="T1:U16">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="77,225" id="srcline225">225</a></span><span class="line">    <span class="mxinfo" id="T1:U17"><span class="var type1" id="S70T1U2857">q2</span> = <span class="mxinfo" id="T1:U19"><span class="var type1" id="S66T9U2859">qwp</span>(<span class="mxinfo" id="T1:U21">2</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="77,226" id="srcline226">226</a></span><span class="line">    <span class="mxinfo" id="T1:U22"><span class="var type1" id="S71T1U2863">q3</span> = <span class="mxinfo" id="T1:U24"><span class="var type1" id="S66T9U2865">qwp</span>(<span class="mxinfo" id="T1:U26">3</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="77,227" id="srcline227">227</a></span><span class="line">    <span class="mxinfo" id="T1:U27"><span class="var type1" id="S72T1U2869">q4</span> = <span class="mxinfo" id="T1:U29"><span class="var type1" id="S66T9U2871">qwp</span>(<span class="mxinfo" id="T1:U31">4</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="77,228" id="srcline228">228</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="77,229" id="srcline229">229</a></span><span class="line">    <span class="mxinfo" id="T1:U32"><span class="var type1" id="S73T1U2875">rq11</span> = <span class="mxinfo" id="T1:U34"><span class="mxinfo" id="T1:U35"><span class="mxinfo" id="T1:U36"><span class="mxinfo" id="T1:U37"><span class="var type1" id="S69T1U2880">q1</span>^2</span> + <span class="mxinfo" id="T1:U39"><span class="var type1" id="S70T1U2883">q2</span>^2</span></span> - <span class="mxinfo" id="T1:U41"><span class="var type1" id="S71T1U2886">q3</span>^2</span></span> - <span class="mxinfo" id="T1:U43"><span class="var type1" id="S72T1U2889">q4</span>^2</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="77,230" id="srcline230">230</a></span><span class="line">    <span class="mxinfo" id="T1:U45"><span class="var type1" id="S74T1U2893">rq12</span> = <span class="mxinfo" id="T1:U47"><span class="mxinfo" id="T1:U48">2</span>*(<span class="mxinfo" id="T1:U49"><span class="mxinfo" id="T1:U50"><span class="var type1" id="S70T1U2899">q2</span>*<span class="var type1" id="S71T1U2900">q3</span></span> - <span class="mxinfo" id="T1:U53"><span class="var type1" id="S69T1U2902">q1</span>*<span class="var type1" id="S72T1U2903">q4</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="77,231" id="srcline231">231</a></span><span class="line">    <span class="mxinfo" id="T1:U56"><span class="var type1" id="S75T1U2906">rq13</span> = <span class="mxinfo" id="T1:U58"><span class="mxinfo" id="T1:U59">2</span>*(<span class="mxinfo" id="T1:U60"><span class="mxinfo" id="T1:U61"><span class="var type1" id="S70T1U2912">q2</span>*<span class="var type1" id="S72T1U2913">q4</span></span> + <span class="mxinfo" id="T1:U64"><span class="var type1" id="S69T1U2915">q1</span>*<span class="var type1" id="S71T1U2916">q3</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="77,232" id="srcline232">232</a></span><span class="line">    <span class="mxinfo" id="T1:U67"><span class="var type1" id="S76T1U2919">rq21</span> = <span class="mxinfo" id="T1:U69"><span class="mxinfo" id="T1:U70">2</span>*(<span class="mxinfo" id="T1:U71"><span class="mxinfo" id="T1:U72"><span class="var type1" id="S70T1U2925">q2</span>*<span class="var type1" id="S71T1U2926">q3</span></span> + <span class="mxinfo" id="T1:U75"><span class="var type1" id="S69T1U2928">q1</span>*<span class="var type1" id="S72T1U2929">q4</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="77,233" id="srcline233">233</a></span><span class="line">    <span class="mxinfo" id="T1:U78"><span class="var type1" id="S77T1U2932">rq22</span> = <span class="mxinfo" id="T1:U80"><span class="mxinfo" id="T1:U81"><span class="mxinfo" id="T1:U82"><span class="mxinfo" id="T1:U83"><span class="var type1" id="S69T1U2937">q1</span>^2</span> - <span class="mxinfo" id="T1:U85"><span class="var type1" id="S70T1U2940">q2</span>^2</span></span> + <span class="mxinfo" id="T1:U87"><span class="var type1" id="S71T1U2943">q3</span>^2</span></span> - <span class="mxinfo" id="T1:U89"><span class="var type1" id="S72T1U2946">q4</span>^2</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="77,234" id="srcline234">234</a></span><span class="line">    <span class="mxinfo" id="T1:U91"><span class="var type1" id="S78T1U2950">rq23</span> = <span class="mxinfo" id="T1:U93"><span class="mxinfo" id="T1:U94">2</span>*(<span class="mxinfo" id="T1:U95"><span class="mxinfo" id="T1:U96"><span class="var type1" id="S71T1U2956">q3</span>*<span class="var type1" id="S72T1U2957">q4</span></span> - <span class="mxinfo" id="T1:U99"><span class="var type1" id="S69T1U2959">q1</span>*<span class="var type1" id="S70T1U2960">q2</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="77,235" id="srcline235">235</a></span><span class="line">    <span class="mxinfo" id="T1:U102"><span class="var type1" id="S79T1U2963">rq31</span> = <span class="mxinfo" id="T1:U104"><span class="mxinfo" id="T1:U105">2</span>*(<span class="mxinfo" id="T1:U106"><span class="mxinfo" id="T1:U107"><span class="var type1" id="S70T1U2969">q2</span>*<span class="var type1" id="S72T1U2970">q4</span></span> - <span class="mxinfo" id="T1:U110"><span class="var type1" id="S69T1U2972">q1</span>*<span class="var type1" id="S71T1U2973">q3</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="77,236" id="srcline236">236</a></span><span class="line">    <span class="mxinfo" id="T1:U113"><span class="var type1" id="S80T1U2976">rq32</span> = <span class="mxinfo" id="T1:U115"><span class="mxinfo" id="T1:U116">2</span>*(<span class="mxinfo" id="T1:U117"><span class="mxinfo" id="T1:U118"><span class="var type1" id="S71T1U2982">q3</span>*<span class="var type1" id="S72T1U2983">q4</span></span> + <span class="mxinfo" id="T1:U121"><span class="var type1" id="S69T1U2985">q1</span>*<span class="var type1" id="S70T1U2986">q2</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="77,237" id="srcline237">237</a></span><span class="line">    <span class="mxinfo" id="T1:U124"><span class="var type1" id="S81T1U2989">rq33</span> = <span class="mxinfo" id="T1:U126"><span class="mxinfo" id="T1:U127"><span class="mxinfo" id="T1:U128"><span class="mxinfo" id="T1:U129"><span class="var type1" id="S69T1U2994">q1</span>^2</span> - <span class="mxinfo" id="T1:U131"><span class="var type1" id="S70T1U2997">q2</span>^2</span></span> - <span class="mxinfo" id="T1:U133"><span class="var type1" id="S71T1U3000">q3</span>^2</span></span> + <span class="mxinfo" id="T1:U135"><span class="var type1" id="S72T1U3003">q4</span>^2</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="77,238" id="srcline238">238</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="77,239" id="srcline239">239</a></span><span class="line">    <span class="mxinfo" id="T5:U137"><span class="var type1" id="S82T5U3007">Rwp</span> = <span class="mxinfo" id="T5:U139">[<span class="mxinfo" id="T17:U140"><span class="var type1" id="S73T1U3010">rq11</span> <span class="var type1" id="S74T1U3011">rq12</span> <span class="var type1" id="S75T1U3012">rq13</span></span>; <span class="mxinfo" id="T17:U144"><span class="var type1" id="S76T1U3014">rq21</span> <span class="var type1" id="S77T1U3015">rq22</span> <span class="var type1" id="S78T1U3016">rq23</span></span>; <span class="mxinfo" id="T17:U148"><span class="var type1" id="S79T1U3018">rq31</span> <span class="var type1" id="S80T1U3019">rq32</span> <span class="var type1" id="S81T1U3020">rq33</span></span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="77,240" id="srcline240">240</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="77,241" id="srcline241">241</a></span><span class="line">    <span class="mxinfo" id="T6:U152"><span class="var type1" id="S83T6U3023">image_homog</span> = <span class="mxinfo" id="T6:U154"><span class="mxinfo" id="T5:U155"><span class="var type1" id="S62T5U3026">A</span>*<span class="var type1" id="S63T5U3027">Rcw</span></span>*(<span class="mxinfo" id="T6:U158"><span class="mxinfo" id="T6:U159"><span class="mxinfo" id="T6:U160"><span class="var type1" id="S82T5U3032">Rwp</span>*<span class="var type1" id="S67T6U3033">Po</span></span> + <span class="var type1" id="S65T6U3034">Twp</span></span> - <span class="var type1" id="S64T6U3035">Tcw</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="77,242" id="srcline242">242</a></span><span class="line">    <span class="mxinfo" id="T1:U165"><span class="mxinfo" id="T1:U166"><span class="var type1" id="S61T16U3039">x</span>(<span class="mxinfo" id="T1:U168">1</span>,<span class="mxinfo" id="T1:U169">1</span>)</span> = <span class="mxinfo" id="T1:U170"><span class="mxinfo" id="T1:U171"><span class="var type1" id="S83T6U3044">image_homog</span>(<span class="mxinfo" id="T1:U173">1</span>)</span>/<span class="mxinfo" id="T1:U174"><span class="var type1" id="S83T6U3047">image_homog</span>(<span class="mxinfo" id="T1:U176">3</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="77,243" id="srcline243">243</a></span><span class="line">    <span class="mxinfo" id="T1:U177"><span class="mxinfo" id="T1:U178"><span class="var type1" id="S61T16U3052">x</span>(<span class="mxinfo" id="T1:U180">2</span>,<span class="mxinfo" id="T1:U181">1</span>)</span> = <span class="mxinfo" id="T1:U182"><span class="mxinfo" id="T1:U183"><span class="var type1" id="S83T6U3057">image_homog</span>(<span class="mxinfo" id="T1:U185">2</span>)</span>/<span class="mxinfo" id="T1:U186"><span class="var type1" id="S83T6U3060">image_homog</span>(<span class="mxinfo" id="T1:U188">3</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="77,244" id="srcline244">244</a></span><span class="line"><span class="keyword">end</span></span></span>
</pre>
